# Day 8: Minesweeper - Classic Logic Puzzle ✅

## 完成日期
2025-12-07

## 🎮 遊戲資訊
- **名稱**: Minesweeper (踩地雷)
- **類型**: 邏輯益智遊戲
- **檔案**: `games/game_008_minesweeper.py`
- **難度**: 中等
- **狀態**: ✅ 完成

## 📝 遊戲特色

### 核心機制
1. **揭開方格**:
   - 顯示周圍地雷數量
   - 數字為0時自動展開相鄰方格
   - 踩到地雷遊戲結束

2. **標記系統**:
   - 用旗幟標記疑似地雷位置
   - 剩餘地雷數量提示

3. **遊戲目標**:
   - 揭開所有非地雷方格

4. **第一次點擊保護**:
   - 第一次點擊永遠不會是地雷

### 操作方式
```
↑↓←→ : 移動光標
SPACE: 揭開方格
F    : 標記/取消旗幟
R    : 重新開始
Q    : 退出遊戲
```

## 💻 技術實現

### 核心算法

#### 1. 地雷生成
```python
def generate_mines(avoid_x, avoid_y):
    # 避開第一次點擊位置
    positions = [(x, y) for all positions if not first_click]
    mine_positions = random.sample(positions, mines_count)
```

#### 2. Flood Fill 自動展開
使用遞迴演算法展開0周圍的方格：
```python
def reveal(x, y):
    if revealed or flagged:
        return
    
    revealed[y][x] = True
    
    if numbers[y][x] == 0:
        # 遞迴展開所有相鄰格子
        for neighbor in neighbors:
            reveal(neighbor.x, neighbor.y)
```

#### 3. 勝利檢測
```python
def check_win():
    # 所有非地雷格子都已揭開
    for each cell:
        if not mine and not revealed:
            return False
    return True
```

### 難度設定

#### 簡單模式
- 棋盤: 8x8 (64格)
- 地雷: 10
- 地雷密度: 15.6%

#### 中等模式
- 棋盤: 10x10 (100格)
- 地雷: 15
- 地雷密度: 15%

#### 困難模式
- 棋盤: 16x16 (256格)
- 地雷: 40
- 地雷密度: 15.6%

### 視覺設計

#### 遊戲界面
```
    MINESWEEPER - 踩地雷
    
Mines: 15  Flags: 3  Time: 45s

  ░ ░ ░ ░ ░ ░ ░ ░ ░ ░
  ░ 1 2 ⚑ 1 ░ ░ ░ ░ ░
  ░ 1 █ 2 1 ░ ░ ░ ░ ░
  ░ 1 1 1 ░ ░ ░ ░ ░ ░
  ░ ░ ░ ░ ░ ░ ░ 1 1 1
  ░ ░ 1 1 1 ░ ░ 1   1
  ░ ░ 1   1 ░ ░ 1 1 1
  ░ ░ 1 1 1 ░ ░ ░ ░ ░
  ░ ░ ░ ░ ░ ░ ░ ░ ░ ░
  ░ ░ ░ ░ ░ ░ ░ ░ ░ ░

↑↓←→: Move  SPACE: Reveal
F: Flag  R: Restart  Q: Quit
```

#### 符號說明
- `░`: 未揭開的方格
- `█`: 光標位置（反白）
- `⚑`: 旗幟標記
- `1-8`: 周圍地雷數量
- `*`: 地雷（遊戲結束時）
- ` `: 空白（周圍無地雷）

#### 顏色配置
- **1**: 藍色
- **2**: 綠色
- **3**: 紅色
- **4-8**: 漸變顏色
- **旗幟**: 黃色
- **地雷**: 紅色

## 🎨 特色功能

1. **難度選擇介面**:
   - 開始前選擇難度
   - 三種預設難度
   - 清晰的選單介面

2. **智能展開**:
   - Flood Fill 演算法
   - 0的自動展開
   - 快速揭開大片區域

3. **遊戲統計**:
   - 計時器
   - 剩餘地雷數
   - 已放旗幟數

4. **第一次點擊保護**:
   - 確保遊戲公平性
   - 第一次點擊後才生成地雷

## 🧪 測試要點

### 核心功能測試
- ✅ 地雷隨機生成
- ✅ 第一次點擊不是地雷
- ✅ 數字計算正確
- ✅ Flood Fill 正確展開
- ✅ 旗幟標記正常
- ✅ 勝利檢測正確

### 遊戲邏輯測試
- ✅ 踩到地雷遊戲結束
- ✅ 顯示所有地雷位置
- ✅ 計時器正常工作
- ✅ 重新開始功能正常

### 視覺測試
- ✅ 光標移動流暢
- ✅ 數字顏色清晰
- ✅ 界面不閃爍
- ✅ 難度選單正常

## 📊 開發數據

### 程式碼統計
- 總行數: ~330行
- 主要類別:
  - `Minesweeper`: 主遊戲邏輯
  - 方法數: ~12個

### 關鍵方法
- `generate_mines()`: 生成地雷
- `calculate_numbers()`: 計算數字
- `reveal()`: 揭開方格（Flood Fill）
- `toggle_flag()`: 標記旗幟
- `check_win()`: 勝利檢測
- `show_difficulty_menu()`: 難度選單

## 🎓 學習收穫

### 演算法應用
1. **Flood Fill**: 遞迴展開演算法
2. **隨機生成**: 避開特定位置的隨機
3. **鄰居檢測**: 8方向鄰居遍歷

### 遊戲設計
1. **公平性**: 第一次點擊保護
2. **難度平衡**: 15%地雷密度最佳
3. **使用者體驗**: 難度選擇很重要

## 🌟 亮點與創新

1. **第一次點擊保護**: 確保公平性
2. **Flood Fill 演算法**: 經典圖形演算法應用
3. **難度選單**: 清晰的使用者介面
4. **計時功能**: 增加競技性

## 🎯 成就達成

✅ 完成第8個遊戲
✅ Puzzle & Logic 類別進展 (2/4)
✅ 實現 Flood Fill 演算法
✅ 經典遊戲重現

## 📝 總結

Minesweeper 是經典的邏輯益智遊戲：
- 策略性強
- 適合CLI環境
- Flood Fill 演算法實用
- 遊戲體驗完整

這是一個充滿邏輯思考的遊戲，在終端環境中完美重現了經典玩法。Flood Fill 演算法的應用讓遊戲體驗更流暢。

---
**Day**: 8/10
**Status**: ✅ Complete
**Category**: Puzzle & Logic
**Difficulty**: Medium
**Fun Level**: ⭐⭐⭐⭐⭐

**Next**: Game 9 - Wordle (猜單字)

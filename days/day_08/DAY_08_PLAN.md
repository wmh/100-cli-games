# Day 8: Minesweeper - è¸©åœ°é›·

## ğŸ® éŠæˆ²æ¦‚è¿°

Minesweeperï¼ˆè¸©åœ°é›·ï¼‰æ˜¯ä¸€æ¬¾ç¶“å…¸çš„é‚è¼¯ç›Šæ™ºéŠæˆ²ï¼Œç©å®¶éœ€è¦åœ¨æ–¹æ ¼æ£‹ç›¤ä¸Šæ¨™è¨˜å‡ºæ‰€æœ‰åœ°é›·çš„ä½ç½®ï¼ŒåŒæ™‚é¿å…è¸©åˆ°åœ°é›·ã€‚

## ğŸ¯ éŠæˆ²ç‰¹è‰²

### ç‚ºä»€éº¼é©åˆ CLIï¼Ÿ
- âœ… ç¶“å…¸é‚è¼¯éŠæˆ²
- âœ… å›åˆåˆ¶ï¼Œä¸éœ€è¦å¿«é€Ÿåæ‡‰
- âœ… æ–¹æ ¼ä»‹é¢é©åˆçµ‚ç«¯
- âœ… æ•¸å­—æç¤ºç³»çµ±æ¸…æ™°
- âœ… ç­–ç•¥æ€§å¼·

### æ ¸å¿ƒæ©Ÿåˆ¶
1. **æ­é–‹æ–¹æ ¼**ï¼š
   - é»æ“Šæ–¹æ ¼é¡¯ç¤ºæ•¸å­—ï¼ˆå‘¨åœåœ°é›·æ•¸é‡ï¼‰
   - æ•¸å­—ç‚º0æ™‚è‡ªå‹•å±•é–‹å‘¨åœæ–¹æ ¼
   - è¸©åˆ°åœ°é›·éŠæˆ²çµæŸ

2. **æ¨™è¨˜åœ°é›·**ï¼š
   - ç”¨æ——å¹Ÿæ¨™è¨˜ç–‘ä¼¼åœ°é›·ä½ç½®
   - å•è™Ÿæ¨™è¨˜ä¸ç¢ºå®šçš„æ–¹æ ¼

3. **éŠæˆ²ç›®æ¨™**ï¼š
   - æ­é–‹æ‰€æœ‰éåœ°é›·æ–¹æ ¼
   - æ­£ç¢ºæ¨™è¨˜æ‰€æœ‰åœ°é›·

4. **å‹åˆ©æ¢ä»¶**ï¼š
   - æ‰€æœ‰éåœ°é›·æ–¹æ ¼å·²æ­é–‹
   - æˆ–æ‰€æœ‰åœ°é›·å·²æ­£ç¢ºæ¨™è¨˜

## ğŸ’» æŠ€è¡“è¨­è¨ˆ

### æ ¸å¿ƒæ•¸æ“šçµæ§‹
```python
class Minesweeper:
    def __init__(self, width=10, height=10, mines=10):
        self.width = width
        self.height = height
        self.mines_count = mines
        
        # éŠæˆ²ç‹€æ…‹
        self.board = []  # å¯¦éš›çš„åœ°é›·ä½ç½®
        self.revealed = []  # å·²æ­é–‹çš„æ–¹æ ¼
        self.flags = []  # æ——å¹Ÿæ¨™è¨˜
        self.numbers = []  # æ¯æ ¼å‘¨åœåœ°é›·æ•¸
        
        # éŠæˆ²ç‹€æ…‹
        self.game_over = False
        self.won = False
        self.first_click = True
        
        # å…‰æ¨™ä½ç½®
        self.cursor_x = 0
        self.cursor_y = 0
```

### æ ¸å¿ƒç®—æ³•

#### 1. ç”Ÿæˆåœ°é›·
```python
def generate_mines(self, avoid_x, avoid_y):
    """ç”Ÿæˆåœ°é›·ï¼Œé¿é–‹ç¬¬ä¸€æ¬¡é»æ“Šä½ç½®"""
    positions = [(x, y) for x in range(self.width) 
                 for y in range(self.height)
                 if (x, y) != (avoid_x, avoid_y)]
    
    mine_positions = random.sample(positions, self.mines_count)
    
    for x, y in mine_positions:
        self.board[y][x] = True
```

#### 2. è¨ˆç®—æ•¸å­—
```python
def calculate_numbers(self):
    """è¨ˆç®—æ¯å€‹æ–¹æ ¼å‘¨åœçš„åœ°é›·æ•¸é‡"""
    for y in range(self.height):
        for x in range(self.width):
            if not self.board[y][x]:  # ä¸æ˜¯åœ°é›·
                count = 0
                for dy in [-1, 0, 1]:
                    for dx in [-1, 0, 1]:
                        if dy == 0 and dx == 0:
                            continue
                        ny, nx = y + dy, x + dx
                        if (0 <= ny < self.height and 
                            0 <= nx < self.width and 
                            self.board[ny][nx]):
                            count += 1
                self.numbers[y][x] = count
```

#### 3. æ­é–‹æ–¹æ ¼ï¼ˆFlood Fillï¼‰
```python
def reveal(self, x, y):
    """æ­é–‹æ–¹æ ¼ï¼Œå¦‚æœæ˜¯0å‰‡è‡ªå‹•å±•é–‹"""
    if self.revealed[y][x] or self.flags[y][x]:
        return
    
    self.revealed[y][x] = True
    
    # å¦‚æœæ˜¯åœ°é›·
    if self.board[y][x]:
        self.game_over = True
        return
    
    # å¦‚æœå‘¨åœæ²’æœ‰åœ°é›·ï¼Œéè¿´å±•é–‹
    if self.numbers[y][x] == 0:
        for dy in [-1, 0, 1]:
            for dx in [-1, 0, 1]:
                ny, nx = y + dy, x + dx
                if (0 <= ny < self.height and 
                    0 <= nx < self.width and
                    not self.revealed[ny][nx]):
                    self.reveal(nx, ny)
```

#### 4. æª¢æŸ¥å‹åˆ©
```python
def check_win(self):
    """æª¢æŸ¥æ˜¯å¦ç²å‹"""
    for y in range(self.height):
        for x in range(self.width):
            # å¦‚æœæœ‰éåœ°é›·æ–¹æ ¼æœªæ­é–‹
            if not self.board[y][x] and not self.revealed[y][x]:
                return False
    return True
```

### è¦–è¦ºè¨­è¨ˆ

#### éŠæˆ²ç•Œé¢
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   MINESWEEPER - è¸©åœ°é›·         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Mines: 10  Flags: 3  Time: 45s â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                â•‘
â•‘   â–‘ â–‘ â–‘ â–‘ â–‘ â–‘ â–‘ â–‘ â–‘ â–‘         â•‘
â•‘   â–‘ 1 2 âš‘ 1 â–‘ â–‘ â–‘ â–‘ â–‘         â•‘
â•‘   â–‘ 1 â–ˆ 2 1 â–‘ â–‘ â–‘ â–‘ â–‘         â•‘
â•‘   â–‘ 1 1 1 â–‘ â–‘ â–‘ â–‘ â–‘ â–‘         â•‘
â•‘   â–‘ â–‘ â–‘ â–‘ â–‘ â–‘ â–‘ 1 1 1         â•‘
â•‘   â–‘ â–‘ 1 1 1 â–‘ â–‘ 1 â–ˆ 1         â•‘
â•‘   â–‘ â–‘ 1 â–ˆ 1 â–‘ â–‘ 1 1 1         â•‘
â•‘   â–‘ â–‘ 1 1 1 â–‘ â–‘ â–‘ â–‘ â–‘         â•‘
â•‘   â–‘ â–‘ â–‘ â–‘ â–‘ â–‘ â–‘ â–‘ â–‘ â–‘         â•‘
â•‘   â–‘ â–‘ â–‘ â–‘ â–‘ â–‘ â–‘ â–‘ â–‘ â–‘         â•‘
â•‘                                â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ â†‘â†“â†â†’: Move  SPACE: Reveal      â•‘
â•‘ F: Flag  Q: Quit  R: Restart   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

#### ç¬¦è™Ÿèªªæ˜
- `â–‘`: æœªæ­é–‹çš„æ–¹æ ¼
- `â–ˆ`: å…‰æ¨™ä½ç½®ï¼ˆåç™½ï¼‰
- `âš‘`: æ——å¹Ÿæ¨™è¨˜
- `?`: å•è™Ÿæ¨™è¨˜
- `1-8`: å‘¨åœåœ°é›·æ•¸é‡
- `ğŸ’£`: åœ°é›·ï¼ˆéŠæˆ²çµæŸæ™‚é¡¯ç¤ºï¼‰
- ` `: ç©ºç™½ï¼ˆå‘¨åœç„¡åœ°é›·ï¼‰

#### æ•¸å­—é¡è‰²
- **1**: è—è‰²
- **2**: ç¶ è‰²
- **3**: ç´…è‰²
- **4**: æ·±è—è‰²
- **5**: æ·±ç´…è‰²
- **6**: é’è‰²
- **7**: é»‘è‰²
- **8**: ç°è‰²

### æ§åˆ¶ç³»çµ±

```python
# ç§»å‹•å…‰æ¨™
KEY_UP, KEY_DOWN, KEY_LEFT, KEY_RIGHT

# éŠæˆ²æ“ä½œ
SPACE: æ­é–‹ç•¶å‰æ–¹æ ¼
'f' / 'F': æ¨™è¨˜/å–æ¶ˆæ——å¹Ÿ
'?' : æ¨™è¨˜å•è™Ÿ
'r' / 'R': é‡æ–°é–‹å§‹
'q' / 'Q': é€€å‡ºéŠæˆ²

# é›£åº¦é¸æ“‡ï¼ˆé–‹å§‹å‰ï¼‰
'1': ç°¡å–® (8x8, 10 mines)
'2': ä¸­ç­‰ (10x10, 15 mines)
'3': å›°é›£ (16x16, 40 mines)
```

## ğŸ“‹ é–‹ç™¼æª¢æŸ¥æ¸…å–®

### éšæ®µ 1: æ ¸å¿ƒé‚è¼¯
- [ ] å»ºç«‹æ£‹ç›¤æ•¸æ“šçµæ§‹
- [ ] å¯¦ä½œåœ°é›·ç”Ÿæˆï¼ˆé¿é–‹ç¬¬ä¸€æ¬¡é»æ“Šï¼‰
- [ ] è¨ˆç®—æ¯æ ¼å‘¨åœåœ°é›·æ•¸
- [ ] å¯¦ä½œæ­é–‹é‚è¼¯ï¼ˆåŒ…å«è‡ªå‹•å±•é–‹ï¼‰

### éšæ®µ 2: éŠæˆ²æ©Ÿåˆ¶
- [ ] æ——å¹Ÿæ¨™è¨˜ç³»çµ±
- [ ] å•è™Ÿæ¨™è¨˜ç³»çµ±
- [ ] å‹åˆ©/å¤±æ•—æª¢æ¸¬
- [ ] è¨ˆæ™‚å™¨åŠŸèƒ½

### éšæ®µ 3: è¦–è¦ºå‘ˆç¾
- [ ] ç¹ªè£½æ£‹ç›¤
- [ ] å…‰æ¨™ç§»å‹•
- [ ] æ•¸å­—é¡è‰²é…ç½®
- [ ] éŠæˆ²ç‹€æ…‹é¡¯ç¤º

### éšæ®µ 4: éŠæˆ²é«”é©—
- [ ] é›£åº¦é¸æ“‡
- [ ] é‡æ–°é–‹å§‹åŠŸèƒ½
- [ ] å‹åˆ©/å¤±æ•—ç•«é¢
- [ ] çµ±è¨ˆæ•¸æ“šï¼ˆæ™‚é–“ã€å‰©é¤˜åœ°é›·æ•¸ï¼‰

## ğŸ¨ ç‰¹æ®Šæ•ˆæœ

### å‹•ç•«æ•ˆæœ
- æ­é–‹å‹•ç•«ï¼šå¿«é€Ÿå±•é–‹æ•ˆæœ
- éŠæˆ²çµæŸï¼šé¡¯ç¤ºæ‰€æœ‰åœ°é›·ä½ç½®
- å‹åˆ©é–ƒçˆï¼šæ£‹ç›¤é‚Šæ¡†é–ƒçˆ

### éŸ³æ•ˆï¼ˆå¯é¸ï¼‰
- æ­é–‹æ–¹æ ¼ï¼šå—¶è²
- æ¨™è¨˜æ——å¹Ÿï¼šå—¶è²
- è¸©åˆ°åœ°é›·ï¼šçˆ†ç‚¸éŸ³æ•ˆ
- ç²å‹ï¼šå‹åˆ©éŸ³æ¨‚

## ğŸ§ª æ¸¬è©¦è¦é»

1. **åœ°é›·ç”Ÿæˆæ¸¬è©¦**ï¼š
   - [ ] åœ°é›·æ•¸é‡æ­£ç¢º
   - [ ] ç¬¬ä¸€æ¬¡é»æ“Šä¸æœƒæ˜¯åœ°é›·
   - [ ] åœ°é›·åˆ†å¸ƒéš¨æ©Ÿ

2. **æ­é–‹é‚è¼¯æ¸¬è©¦**ï¼š
   - [ ] æ•¸å­—è¨ˆç®—æ­£ç¢º
   - [ ] 0çš„è‡ªå‹•å±•é–‹æ­£ç¢º
   - [ ] ä¸æœƒæ­é–‹å·²æ¨™è¨˜çš„æ–¹æ ¼

3. **éŠæˆ²ç‹€æ…‹æ¸¬è©¦**ï¼š
   - [ ] è¸©åˆ°åœ°é›·æ­£ç¢ºçµæŸéŠæˆ²
   - [ ] æ­é–‹æ‰€æœ‰éåœ°é›·æ–¹æ ¼ç²å‹
   - [ ] æ——å¹Ÿè¨ˆæ•¸æ­£ç¢º

4. **è¦–è¦ºæ¸¬è©¦**ï¼š
   - [ ] å…‰æ¨™ç§»å‹•æµæš¢
   - [ ] æ•¸å­—é¡è‰²æ¸…æ™°
   - [ ] ç•Œé¢ä¸é–ƒçˆ

## ğŸš€ é›£åº¦è¨­å®š

### ç°¡å–®ï¼ˆåˆå­¸è€…ï¼‰
- æ£‹ç›¤: 8x8
- åœ°é›·: 10
- åœ°é›·å¯†åº¦: 15.6%

### ä¸­ç­‰ï¼ˆä¸­ç´šï¼‰
- æ£‹ç›¤: 10x10
- åœ°é›·: 15
- åœ°é›·å¯†åº¦: 15%

### å›°é›£ï¼ˆå°ˆå®¶ï¼‰
- æ£‹ç›¤: 16x16
- åœ°é›·: 40
- åœ°é›·å¯†åº¦: 15.6%

### è‡ªè¨‚ï¼ˆæœªä¾†ï¼‰
- è‡ªè¨‚å¯¬åº¦ã€é«˜åº¦ã€åœ°é›·æ•¸

## ğŸ“ æ¼”ç®—æ³•é‡é»

### Flood Fillï¼ˆæ´ªæ°´å¡«å……ï¼‰
æ­é–‹0æ™‚çš„éè¿´å±•é–‹ä½¿ç”¨ Flood Fill æ¼”ç®—æ³•ï¼š
```python
def flood_fill(x, y):
    if visited[y][x]:
        return
    visited[y][x] = True
    
    if numbers[y][x] == 0:
        for neighbor in get_neighbors(x, y):
            flood_fill(neighbor.x, neighbor.y)
```

### ç¬¬ä¸€æ¬¡é»æ“Šä¿è­·
ç¢ºä¿ç¬¬ä¸€æ¬¡é»æ“Šä¸æœƒè¸©åˆ°åœ°é›·ï¼Œæå‡éŠæˆ²é«”é©—ï¼š
```python
if first_click:
    generate_mines(avoid_x=cursor_x, avoid_y=cursor_y)
    first_click = False
```

## ğŸ“š åƒè€ƒè³‡æ–™
- ç¶“å…¸ Windows Minesweeper
- Flood Fill æ¼”ç®—æ³•
- CLI çµ‚ç«¯åœ–å½¢æœ€ä½³å¯¦è¸

---
**å‰µå»ºæ™‚é–“**: 2025-12-07
**é è¨ˆå®Œæˆ**: Day 8
**é›£åº¦**: â­â­â­ (ä¸­ç­‰)
